<!-- Editor Customization Dialog -->
<div data-controller="customize"
     data-customize-font-value="<%= @config&.dig('settings', 'editor_font') || 'cascadia-code' %>"
     data-customize-font-size-value="<%= @config&.dig('settings', 'editor_font_size') || 14 %>"
     data-action="customize:applied->app#onCustomizeApplied">
  <dialog
    class="p-0 rounded-lg shadow-xl backdrop:bg-black/50 w-[400px]"
    data-customize-target="dialog"
    data-app-target="customizeDialog"
  >
    <div class="p-4">
      <%= render "shared/dialog_header", title: t('dialogs.customize.title'), close_action: "click->customize#close", margin_bottom: "mb-4" %>

      <!-- Font Family -->
      <div class="mb-4">
        <label class="block text-xs text-[var(--theme-text-muted)] mb-1.5"><%= t('dialogs.customize.font_family') %></label>
        <select
          data-customize-target="fontSelect"
          data-action="change->customize#onFontChange"
          class="w-full px-3 py-2 text-sm border border-[var(--theme-border)] rounded-md bg-[var(--theme-bg-primary)] text-[var(--theme-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)]"
        >
          <option value="cascadia-code" style="font-family: 'Cascadia Code', monospace">Cascadia Code</option>
          <option value="consolas" style="font-family: Consolas, monospace">Consolas</option>
          <option value="dejavu-mono" style="font-family: 'DejaVu Mono', monospace">DejaVu Sans Mono</option>
          <option value="fira-code" style="font-family: 'Fira Code', monospace">Fira Code</option>
          <option value="hack" style="font-family: Hack, monospace">Hack</option>
          <option value="jetbrains-mono" style="font-family: 'JetBrains Mono', monospace">JetBrains Mono</option>
          <option value="roboto-mono" style="font-family: 'Roboto Mono', monospace">Roboto Mono</option>
          <option value="source-code-pro" style="font-family: 'Source Code Pro', monospace">Source Code Pro</option>
          <option value="ubuntu-mono" style="font-family: 'Ubuntu Mono', monospace">Ubuntu Mono</option>
        </select>
      </div>

      <!-- Font Size -->
      <div class="mb-4">
        <label class="block text-xs text-[var(--theme-text-muted)] mb-1.5"><%= t('dialogs.customize.font_size') %></label>
        <select
          data-customize-target="fontSizeSelect"
          data-action="change->customize#onFontSizeChange"
          class="w-full px-3 py-2 text-sm border border-[var(--theme-border)] rounded-md bg-[var(--theme-bg-primary)] text-[var(--theme-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--theme-accent)]"
        >
          <option value="12">12px</option>
          <option value="13">13px</option>
          <option value="14" selected>14px</option>
          <option value="15">15px</option>
          <option value="16">16px</option>
          <option value="18">18px</option>
          <option value="20">20px</option>
          <option value="22">22px</option>
          <option value="24">24px</option>
        </select>
      </div>

      <!-- Preview -->
      <div class="mb-4">
        <label class="block text-xs text-[var(--theme-text-muted)] mb-1.5"><%= t('dialogs.customize.preview') %></label>
        <div
          data-customize-target="preview"
          class="p-3 border border-[var(--theme-border)] rounded-md bg-[var(--theme-bg-primary)] text-[var(--theme-text-primary)] h-24 overflow-hidden"
          style="font-family: 'Cascadia Code', monospace; font-size: 14px; line-height: 1.6;"
        >
          <div>// The quick brown fox</div>
          <div>function hello() {</div>
          <div>&nbsp;&nbsp;return "Hello, World!";</div>
          <div>}</div>
        </div>
      </div>

      <!-- Footer -->
      <div class="flex justify-end gap-2">
        <%= render "shared/button_secondary", label: t('common.cancel'), action: "click->customize#close" %>
        <%= render "shared/button_primary", label: t('common.apply'), action: "click->customize#apply" %>
      </div>
    </div>
  </dialog>
</div>
